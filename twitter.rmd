---
title: "Raspagem de dados no Twitter"
author: "Jessica Voigt"
date: "25 de junho de 2018"
output: html_document
---

Uma das grandes facilidades ao trabalharmos com o twitter é a possibildiade de capturar os dados via API. Isso significa que, diferentemente de quando raspamos páginas de internet, não precisamos capturar o códido HTML de um página do twitter para obter dados sobre tweets, usuários, etc. Basta enviarmos um "request" especifico via API e recebemos de volta os dados desejados (o processo é muito semelhante ao do Web Service da Câmara dos Deputados).

Antes de enviar requisições de dados, porém, precisamos informar ao Twitter quem somos e conectarnos à API. Nosso primeiro passo, portanto, é criar uma conta no twitter. Você pode usar sua conta pessoal se desejar.

Uma vez criada a conta no Twitter, precisamos "criar um APP" específico para podermos nos conectar. Vá para o endereço https://apps.twitter.com/ e selecione "Create New App".

Preencha os dados. Note que o campo "Website" precisa ser informado, mas você pode usar uma página pessoal (por exemplo, seu github). Para o bom funcionamento da conexão, o campo "Callback URL" deve ser preenchido com "http://127.0.0.1:1410".

Volte para a página inicial do seu Twitter Apps. Escolha seu novo App. Clique na aba "Keys and Access Tokens". As chaves "Consumer Key (API Key)", "Consumer Secret (API Secret)", "Access Token" e "Access Token Secret" são as informações que precisaremos para estabelecer uma conexão com o Twitter via R.

### Pacote twitteR - preparando o ambiente

Temos que começar instalando uma biblioteca chamada twitteR. Esta biblioteca depende de outras duas, chamadas ROAuth (para autenticar conexões na web) e httr (para fazer requisições http, "http requests"). Vamos, assim, instalar as 3 bibliotecas:

```{r}
library(ROAuth)
library(httr)
library(twitteR)
```

### Estabelecendo uma conexão Twitter - R

Para conectar-se ao Twitter via R, utilizaremos a função setup_twitter_oauth. Esta função recebe como parâmetros as "chaves" que você encontrará na página do App que você criou, "Consumer Key (API Key)", "Consumer Secret (API Secret)", "Access Token" e "Access Token Secret". É conveniente armazenar ambas em objetos de texto:

```{r}

# consumer_key <- "xxx"

setup_twitter_oauth(consumer_key,
                    consumer_secret,
                    access_token,
                    access_secret)

library(httr)
library(devtools)
library(twitteR)
setup_twitter_oauth(consumer_key, consumer_secret, access_token, access_secret)

```

Não estou conseguindo passar dessa parte, vou tentar no computador da TB

https://github.com/geoffjentry/twitteR/issues/74
